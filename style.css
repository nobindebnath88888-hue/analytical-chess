:root {
    --bg: #ffffff; --text: #333333; --box: #f4f4f4; --accent: #2b4a7d; --border: #dddddd;
    --modal-bg: rgba(0,0,0,0.5); --check-color: #ff4d4d; --light-square: #f0f2f5;
    --dark-square: #2b4a7d; --last-move: rgba(255, 255, 0, 0.4);
}

body.dark-mode {
    --bg: #121212; --text: #e0e0e0; --box: #1e1e1e; --border: #333333; --modal-bg: rgba(0,0,0,0.8);
}

body { background-color: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; transition: 0.3s; margin: 0; padding: 20px; }
.container { max-width: 950px; margin: auto; text-align: center; }

.timer-container { display: flex; justify-content: center; gap: 20px; margin-bottom: 15px; }
.timer { font-size: 24px; font-weight: bold; padding: 10px 20px; border-radius: 8px; background: var(--box); border: 2px solid var(--border); min-width: 130px; }
.timer.active { border-color: var(--accent); box-shadow: 0 0 10px var(--accent); color: var(--accent); }

.controls { margin-bottom: 15px; display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
button:disabled { opacity: 0.5; cursor: not-allowed; }

#theme-toggle, #sound-toggle, #full-screen, #highlight-toggle, #flip-toggle, #resign-btn, #draw-btn { 
    padding: 8px 12px; cursor: pointer; border-radius: 5px; border: 1px solid var(--border); background: var(--box); color: var(--text); font-size: 13px;
}

.white-1e1d7 { background-color: var(--light-square) !important; }
.black-3c85d { background-color: var(--dark-square) !important; }

.highlight-last-move { box-shadow: inset 0 0 3px 3px var(--last-move); }
.highlight-check { box-shadow: inset 0 0 3px 3px var(--check-color); animation: pulse 1.5s infinite; }
.highlight-selected { background-color: rgba(255, 255, 0, 0.5) !important; }

@keyframes pulse { 0%, 100% { box-shadow: inset 0 0 3px 3px var(--check-color); } 50% { box-shadow: inset 0 0 10px 10px var(--check-color); } }

.dot { height: 12px; width: 12px; background-color: rgba(0, 0, 0, 0.2); border-radius: 50%; display: inline-block; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; }

.game-layout { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 20px; }
.sidebar-container { width: 320px; display: flex; flex-direction: column; gap: 15px; }
.history-section, .chat-section { background: var(--box); border: 1px solid var(--border); border-radius: 8px; display: flex; flex-direction: column; height: 320px; }
#move-list, #chat-messages { flex-grow: 1; overflow-y: auto; padding: 10px; text-align: left; font-size: 14px; }
.chat-input-area { display: flex; border-top: 1px solid var(--border); }
#chatInput { flex-grow: 1; border: none; padding: 10px; background: transparent; color: var(--text); }
.chat-input-area button { background: var(--accent); color: white; border: none; padding: 0 15px; cursor: pointer; }

.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: var(--modal-bg); }
.modal-content { background-color: var(--bg); margin: 15% auto; padding: 30px; border: 2px solid var(--accent); width: 320px; border-radius: 15px; text-align: center; }
.chat-msg { margin-bottom: 8px; font-size: 13px; border-bottom: 1px solid var(--border); padding-bottom: 4px; }
